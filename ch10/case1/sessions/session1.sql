SHOW VARIABLES LIKE '%slow_query_log%';
SET GLOBAL SLOW_QUERY_LOG = ON;
SHOW VARIABLES LIKE '%slow_query_log%';
CALL idata();
EXPLAIN
SELECT *
FROM t
WHERE a BETWEEN 10000 AND 20000;
# key: a
# type: range
# extra: Using index condition

START TRANSACTION WITH CONSISTENT SNAPSHOT;
# switch to session 2
COMMIT;

--

SHOW INDEX FROM t;

EXPLAIN
SELECT *
FROM t
WHERE a BETWEEN 10000 AND 20000;

EXPLAIN
SELECT *
FROM t FORCE INDEX (a)
WHERE a BETWEEN 10000 AND 20000;

--

EXPLAIN
SELECT *
FROM t
WHERE (a BETWEEN 1 AND 1000)
  AND (b BETWEEN 50000 AND 100000)
ORDER BY b
LIMIT 1;

SELECT *
FROM t
WHERE (a BETWEEN 1 AND 1000)
  AND (b BETWEEN 50000 AND 100000)
ORDER BY b
LIMIT 1;

SELECT *
FROM t FORCE INDEX (a)
WHERE (a BETWEEN 1 AND 1000)
  AND (b BETWEEN 50000 AND 100000)
ORDER BY b
LIMIT 1;


EXPLAIN
SELECT *
FROM t
WHERE (a BETWEEN 1 AND 1000)
  AND (b BETWEEN 50000 AND 100000)
ORDER BY b, a
LIMIT 1;

EXPLAIN
SELECT *
FROM (SELECT * FROM t WHERE (a BETWEEN 1 AND 1000) AND (b BETWEEN 50000 AND 100000) ORDER BY b LIMIT 100) alias
LIMIT 1;